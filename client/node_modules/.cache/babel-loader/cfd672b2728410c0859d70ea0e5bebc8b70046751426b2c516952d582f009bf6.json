{"ast":null,"code":"import { makeAutoObservable } from 'mobx';\nclass CanvasState {\n  constructor() {\n    this.canvas = null;\n    this.undoList = [];\n    this.redoList = [];\n    this.username = '';\n    this.socket = null;\n    this.sessionid = null;\n    makeAutoObservable(this);\n  }\n  set socket(value) {\n    this.socket = value;\n  }\n  set sessionid(value) {\n    this.sessionid = value;\n  }\n  setUserName(username) {\n    this.username = username;\n  }\n  setCanvas(canvas) {\n    this.canvas = canvas;\n  }\n  pushToUndo(data) {\n    this.undoList.push(data);\n  }\n  pushToRedo(data) {\n    this.redoList.push(data);\n  }\n  undo() {\n    let ctx = this.canvas.getContext('2d');\n    if (this.undoList.length > 0) {\n      let dataUrl = this.undoList.pop();\n      this.redoList.push(this.canvas.toDataURL());\n      let img = new Image();\n      img.src = dataUrl;\n      img.onload = () => {\n        ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        ctx.drawImage(img, 0, 0, this.canvas.width, this.canvas.height);\n      };\n    } else {\n      ctx.clearRect(0, 0, this.canvas.width, this.canvas.heigth);\n    }\n  }\n  redo() {\n    let ctx = this.canvas.getContext('2d');\n    if (this.redoList.length > 0) {\n      let dataUrl = this.redoList.pop();\n      this.undoList.push(this.canvas.toDataURL());\n      let img = new Image();\n      img.src = dataUrl;\n      img.onload = () => {\n        ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        ctx.drawImage(img, 0, 0, this.canvas.width, this.canvas.height);\n      };\n    }\n  }\n}\nexport default new CanvasState();","map":{"version":3,"names":["makeAutoObservable","CanvasState","constructor","canvas","undoList","redoList","username","socket","sessionid","value","setUserName","setCanvas","pushToUndo","data","push","pushToRedo","undo","ctx","getContext","length","dataUrl","pop","toDataURL","img","Image","src","onload","clearRect","width","height","drawImage","heigth","redo"],"sources":["/Users/malinatrash/Library/Mobile Documents/com~apple~CloudDocs/develop/Web/paint-online/client/src/store/canvasState.js"],"sourcesContent":["import { makeAutoObservable } from 'mobx'\n\nclass CanvasState {\n\tcanvas = null\n\tundoList = []\n\tredoList = []\n\tusername = ''\n\tsocket = null\n\tsessionid = null\n\n\tconstructor() {\n\t\tmakeAutoObservable(this)\n\t}\n\n\n\tset socket(value) {\n\t\tthis.socket = value\n\t}\n\n\tset sessionid(value) {\n\t\tthis.sessionid = value\n\t}\n\n\tsetUserName(username) {\n\t\tthis.username = username\n\t}\n\n\tsetCanvas(canvas) {\n\t\tthis.canvas = canvas\n\t}\n\n\tpushToUndo(data) {\n\t\tthis.undoList.push(data)\n\t}\n\n\tpushToRedo(data) {\n\t\tthis.redoList.push(data)\n\t}\n\n\tundo() {\n\t\tlet ctx = this.canvas.getContext('2d')\n\t\tif (this.undoList.length > 0) {\n\t\t\tlet dataUrl = this.undoList.pop()\n\t\t\tthis.redoList.push(this.canvas.toDataURL())\n\t\t\tlet img = new Image()\n\t\t\timg.src = dataUrl\n\t\t\timg.onload = () => {\n\t\t\t\tctx.clearRect(0, 0, this.canvas.width, this.canvas.height)\n\t\t\t\tctx.drawImage(img, 0, 0, this.canvas.width, this.canvas.height)\n\t\t\t}\n\t\t} else {\n\t\t\tctx.clearRect(0, 0, this.canvas.width, this.canvas.heigth)\n\t\t}\n\t}\n\n\tredo() {\n\t\tlet ctx = this.canvas.getContext('2d')\n\t\tif (this.redoList.length > 0) {\n\t\t\tlet dataUrl = this.redoList.pop()\n\t\t\tthis.undoList.push(this.canvas.toDataURL())\n\t\t\tlet img = new Image()\n\t\t\timg.src = dataUrl\n\t\t\timg.onload = () => {\n\t\t\t\tctx.clearRect(0, 0, this.canvas.width, this.canvas.height)\n\t\t\t\tctx.drawImage(img, 0, 0, this.canvas.width, this.canvas.height)\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nexport default new CanvasState()\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}