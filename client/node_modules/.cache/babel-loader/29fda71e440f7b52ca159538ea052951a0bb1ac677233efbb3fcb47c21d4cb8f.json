{"ast":null,"code":"import { makeAutoObservable } from 'mobx';\nclass CanvasState {\n  constructor() {\n    this.canvas = null;\n    this.undoList = [];\n    this.redoList = [];\n    makeAutoObservable(this);\n  }\n  setCanvas(canvas) {\n    this.canvas = canvas;\n  }\n  pushToUdo(data) {\n    this.undoList.push(data);\n  }\n  pushToRedo(data) {}\n  undo() {\n    let context = this.canvas.getContext('2d');\n    if (this.undoList.length > 0) {\n      let data = this.undoList.pop();\n      let image = new Image();\n      image.src = data;\n      image.onload = () => {\n        context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        context.drawImage(image, 0, 0, this.canvas.width, this.canvas.height);\n      };\n    } else {\n      context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    }\n  }\n  redo() {}\n}\nexport default new CanvasState();","map":{"version":3,"names":["makeAutoObservable","CanvasState","constructor","canvas","undoList","redoList","setCanvas","pushToUdo","data","push","pushToRedo","undo","context","getContext","length","pop","image","Image","src","onload","clearRect","width","height","drawImage","redo"],"sources":["/Users/malinatrash/Library/Mobile Documents/com~apple~CloudDocs/develop/Web/paint-online/src/store/canvasState.js"],"sourcesContent":["import { makeAutoObservable } from 'mobx'\n\nclass CanvasState {\n\tcanvas = null\n\tundoList = []\n\tredoList = []\n\tconstructor() {\n\t\tmakeAutoObservable(this)\n\t}\n\tsetCanvas(canvas) {\n\t\tthis.canvas = canvas\n\t}\n\tpushToUdo(data) {\n\t\tthis.undoList.push(data)\n\t}\n\tpushToRedo(data) {}\n\tundo() {\n\t\tlet context = this.canvas.getContext('2d')\n\t\tif (this.undoList.length > 0) {\n\t\t\tlet data = this.undoList.pop()\n\t\t\tlet image = new Image()\n\t\t\timage.src = data\n\t\t\timage.onload = () => {\n\t\t\t\tcontext.clearRect(0, 0, this.canvas.width, this.canvas.height)\n\t\t\t\tcontext.drawImage(image, 0, 0, this.canvas.width, this.canvas.height)\n\t\t\t}\n\t\t} else {\n\t\t\tcontext.clearRect(0, 0, this.canvas.width, this.canvas.height)\n\t\t}\n\t}\n\tredo() {}\n}\n\nexport default new CanvasState()\n"],"mappings":"AAAA,SAASA,kBAAkB,QAAQ,MAAM;AAEzC,MAAMC,WAAW,CAAC;EAIjBC,WAAWA,CAAA,EAAG;IAAA,KAHdC,MAAM,GAAG,IAAI;IAAA,KACbC,QAAQ,GAAG,EAAE;IAAA,KACbC,QAAQ,GAAG,EAAE;IAEZL,kBAAkB,CAAC,IAAI,CAAC;EACzB;EACAM,SAASA,CAACH,MAAM,EAAE;IACjB,IAAI,CAACA,MAAM,GAAGA,MAAM;EACrB;EACAI,SAASA,CAACC,IAAI,EAAE;IACf,IAAI,CAACJ,QAAQ,CAACK,IAAI,CAACD,IAAI,CAAC;EACzB;EACAE,UAAUA,CAACF,IAAI,EAAE,CAAC;EAClBG,IAAIA,CAAA,EAAG;IACN,IAAIC,OAAO,GAAG,IAAI,CAACT,MAAM,CAACU,UAAU,CAAC,IAAI,CAAC;IAC1C,IAAI,IAAI,CAACT,QAAQ,CAACU,MAAM,GAAG,CAAC,EAAE;MAC7B,IAAIN,IAAI,GAAG,IAAI,CAACJ,QAAQ,CAACW,GAAG,EAAE;MAC9B,IAAIC,KAAK,GAAG,IAAIC,KAAK,EAAE;MACvBD,KAAK,CAACE,GAAG,GAAGV,IAAI;MAChBQ,KAAK,CAACG,MAAM,GAAG,MAAM;QACpBP,OAAO,CAACQ,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAACjB,MAAM,CAACkB,KAAK,EAAE,IAAI,CAAClB,MAAM,CAACmB,MAAM,CAAC;QAC9DV,OAAO,CAACW,SAAS,CAACP,KAAK,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,CAACb,MAAM,CAACkB,KAAK,EAAE,IAAI,CAAClB,MAAM,CAACmB,MAAM,CAAC;MACtE,CAAC;IACF,CAAC,MAAM;MACNV,OAAO,CAACQ,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAACjB,MAAM,CAACkB,KAAK,EAAE,IAAI,CAAClB,MAAM,CAACmB,MAAM,CAAC;IAC/D;EACD;EACAE,IAAIA,CAAA,EAAG,CAAC;AACT;AAEA,eAAe,IAAIvB,WAAW,EAAE"},"metadata":{},"sourceType":"module","externalDependencies":[]}